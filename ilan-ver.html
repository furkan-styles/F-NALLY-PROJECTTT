<!doctype html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Yeni Ä°lan Ver</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        padding: 20px;
        background-color: #0f172a;
      }
      .form-kapsayici {
        background: #1e293b;
        padding: 40px;
        border-radius: 12px;
        border-top: 6px solid #e67e22;
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.5);
        max-width: 600px;
        width: 100%;
        margin-top: 20px;
      }
      .form-kapsayici h2 {
        color: white;
        margin-top: 0;
        border-bottom: 2px solid #334155;
        padding-bottom: 10px;
      }
      .form-grup {
        margin-bottom: 20px;
        background: #0f172a;
        padding: 15px;
        border-radius: 8px;
        border: 1px solid #334155;
      }
      .form-grup label {
        display: block;
        color: #e2e8f0;
        margin-bottom: 12px;
        font-weight: bold;
        border-bottom: 1px dashed #475569;
        padding-bottom: 5px;
      }
      .form-grup input,
      .form-grup select,
      .form-grup textarea {
        width: 100%;
        padding: 12px;
        border-radius: 8px;
        border: 1px solid #475569;
        background: #1e293b;
        color: white;
        font-size: 1rem;
        margin-bottom: 10px;
      }
      .form-grup input:focus,
      .form-grup select:focus,
      .form-grup textarea:focus {
        outline: none;
        border-color: #e67e22;
      }
      .geri-btn {
        background: #475569;
        color: white;
        padding: 10px 20px;
        text-decoration: none;
        border-radius: 8px;
        font-weight: bold;
        display: inline-block;
        transition: 0.3s;
      }
      .geri-btn:hover {
        background: #334155;
        transform: translateX(-5px);
      }
      #ozel-ilan-alani {
        display: none;
      }
    </style>
  </head>
  <body>
    <div style="width: 100%; max-width: 600px">
      <a href="index.html" class="geri-btn">â¬…ï¸ Ana Sayfaya DÃ¶n</a>
    </div>

    <div class="form-kapsayici">
      <h2>ğŸ“¢ YardÄ±m Talebi OluÅŸtur</h2>
      <p style="color: #94a3b8; font-size: 0.9rem; margin-bottom: 20px">
        Ä°htiyacÄ±nÄ±zÄ± ve konumunuzu eksiksiz girin. Ekiplerimiz verdiÄŸiniz
        iletiÅŸim numarasÄ± Ã¼zerinden size ulaÅŸacaktÄ±r.
      </p>

      <form id="yeni-ilan-formu">
        <div class="form-grup">
          <label>ğŸ‘¤ Ä°letiÅŸim Bilgileri</label>
          <input
            type="text"
            id="ilan-isim"
            placeholder="Ä°sim Soyisim"
            required
          />
          <input
            type="tel"
            id="telefon"
            placeholder="Telefon NumaranÄ±z (Ã–rn: 0555...)"
            pattern="[0-9]{10,11}"
            title="LÃ¼tfen 10 veya 11 haneli geÃ§erli bir numara girin"
            required
          />
        </div>

        <div class="form-grup">
          <label>ğŸ“ Hedef Konum</label>
          <select id="ilan-sehir" onchange="ilceDoldur()" required>
            <option value="">Ä°l SeÃ§iniz</option>
          </select>
          <select id="ilan-ilce" onchange="mahalleDoldur()" disabled required>
            <option value="">Ã–nce Ä°l SeÃ§iniz</option>
          </select>
          <select id="ilan-mahalle" disabled required>
            <option value="">Ã–nce Ä°lÃ§e SeÃ§iniz</option>
          </select>
        </div>

        <div class="form-grup">
          <label>ğŸš¨ Ä°htiyaÃ§ TÃ¼rÃ¼</label>
          <select id="ihtiyac-secimi" required>
            <option value="">LÃ¼tfen acil bir ihtiyaÃ§ seÃ§in...</option>
            <option value="1">Bebek MamasÄ± ve Temiz Su</option>
            <option value="2">Ã–ÄŸrenci Evinde BoÅŸ Oda (BarÄ±nma)</option>
            <option value="3">Ä°nsÃ¼lin ve SoÄŸutucu Ã‡anta</option>
            <option value="4">GeÃ§ici Yuva veya Klinik AracÄ± (Hayvanlar)</option>
            <option value="5">Ãœcretsiz YKS Matematik Dersi</option>
            <option value="6">Ä°kinci El Laptop Ä°htiyacÄ±</option>
            <option value="7">GÃ¶nÃ¼llÃ¼ Psikolog DesteÄŸi</option>
            <option value="8">Powerbank ve Åarj Ä°stasyonu</option>
            <option value="ozel" style="font-weight: bold; color: #e67e22">
              âš ï¸ FarklÄ± Bir Ä°htiyacÄ±m Var (Ã–zel Ä°lan)
            </option>
          </select>
        </div>

        <div
          id="ozel-ilan-alani"
          class="form-grup"
          style="border-color: #e67e22"
        >
          <label style="color: #e67e22">âš ï¸ Ã–zel Ä°lan DetaylarÄ±</label>
          <input
            type="text"
            id="ilan-baslik"
            placeholder="Ã–rn: 3 Aile iÃ§in Ã‡adÄ±r Ä°htiyacÄ±"
          />
          <textarea
            id="ilan-aciklama"
            rows="4"
            placeholder="Durumu ve tam ihtiyacÄ± anlatÄ±n..."
          ></textarea>
        </div>

        <button
          type="submit"
          class="gonder-btn"
          style="
            width: 100%;
            padding: 15px;
            background: #e67e22;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
          "
        >
          Talebi Sistemlere Ä°let ğŸš€
        </button>
      </form>
    </div>

    <script>
      const lojistikAg = {
        DÃ¼zce: {
          Merkez: ["KÃ¼ltÃ¼r Mah.", "Uzunmustafa Mah.", "Konuralp"],
          AkÃ§akoca: ["Osmaniye Mah.", "YalÄ± Mah."],
        },
        Hatay: {
          Antakya: ["Emek Mah.", "Cebrail Mah."],
          Defne: ["Armutlu Mah.", "SÃ¼merler Mah."],
        },
        KahramanmaraÅŸ: { PazarcÄ±k: ["NarlÄ± Mah."], Elbistan: ["GÃ¼neÅŸli Mah."] },
      };

      document.addEventListener("DOMContentLoaded", () => {
        const sehirSelect = document.getElementById("ilan-sehir");
        for (let sehir in lojistikAg) {
          sehirSelect.add(new Option(sehir, sehir));
        }
      });

      function ilceDoldur() {
        const sehir = document.getElementById("ilan-sehir").value;
        const ilceSel = document.getElementById("ilan-ilce");
        const mahSel = document.getElementById("ilan-mahalle");

        ilceSel.innerHTML = '<option value="">Ä°lÃ§e SeÃ§iniz</option>';
        mahSel.innerHTML = '<option value="">Ã–nce Ä°lÃ§e SeÃ§iniz</option>';
        mahSel.disabled = true;

        if (sehir) {
          ilceSel.disabled = false;
          for (let ilce in lojistikAg[sehir]) {
            ilceSel.add(new Option(ilce, ilce));
          }
        } else {
          ilceSel.disabled = true;
        }
      }

      function mahalleDoldur() {
        const sehir = document.getElementById("ilan-sehir").value;
        const ilce = document.getElementById("ilan-ilce").value;
        const mahSel = document.getElementById("ilan-mahalle");

        mahSel.innerHTML = '<option value="">Mahalle SeÃ§iniz</option>';

        if (ilce) {
          mahSel.disabled = false;
          lojistikAg[sehir][ilce].forEach((m) => mahSel.add(new Option(m, m)));
        } else {
          mahSel.disabled = true;
        }
      }

      const secimKutusu = document.getElementById("ihtiyac-secimi");
      const ozelAlan = document.getElementById("ozel-ilan-alani");
      const baslikInput = document.getElementById("ilan-baslik");
      const aciklamaInput = document.getElementById("ilan-aciklama");

      secimKutusu.addEventListener("change", function () {
        if (this.value === "ozel") {
          ozelAlan.style.display = "block";
          baslikInput.required = true;
          aciklamaInput.required = true;
        } else {
          ozelAlan.style.display = "none";
          baslikInput.required = false;
          aciklamaInput.required = false;
        }
      });

      document
        .getElementById("yeni-ilan-formu")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const secilenDeger = secimKutusu.value;
          const isim = document.getElementById("ilan-isim").value;

          if (secilenDeger === "ozel") {
            alert(
              `SayÄ±n ${isim}, Ã¶zel ilanÄ±nÄ±z tarafÄ±mÄ±za ulaÅŸtÄ±rÄ±lmÄ±ÅŸtÄ±r. Ekiplerimiz en kÄ±sa sÃ¼rede dÃ¶nÃ¼ÅŸ yapacaktÄ±r.`,
            );
            this.reset();
            ozelAlan.style.display = "none";
            window.location.href = "index.html";
          } else {
            let canliIlanlar = JSON.parse(localStorage.getItem("canliIlanlar"));

            if (!canliIlanlar) {
              canliIlanlar = [
                {
                  id: "1",
                  kategori: "gida",
                  baslik: "Bebek MamasÄ± ve Temiz Su",
                  aciklama:
                    "BÃ¶lgedeki 3 aile iÃ§in acil 1 numara bebek mamasÄ± ve 5 damacana su ihtiyacÄ±.",
                  talepSayisi: 47,
                },
                {
                  id: "2",
                  kategori: "barinma",
                  baslik: "Ã–ÄŸrenci Evinde BoÅŸ Oda",
                  aciklama: "Ã–ÄŸrenciyim geÃ§ici olarak kalacak yer arÄ±yorum.",
                  talepSayisi: 14,
                },
                {
                  id: "3",
                  kategori: "saglik",
                  baslik: "Ä°nsÃ¼lin ve SoÄŸutucu Ã‡anta",
                  aciklama:
                    "Tip 1 diyabet hastasÄ± iÃ§in acil insÃ¼lin kalemi ve soÄŸutucu Ã§anta desteÄŸi.",
                  talepSayisi: 28,
                },
                {
                  id: "4",
                  kategori: "hayvanlar",
                  baslik: "GeÃ§ici Yuva veya Klinik AracÄ±",
                  aciklama:
                    "YaralÄ± 2 kedi iÃ§in acil nakil aracÄ± ve geÃ§ici yuva saÄŸlayabilecek gÃ¶nÃ¼llÃ¼ler aranÄ±yor.",
                  talepSayisi: 9,
                },
                {
                  id: "5",
                  kategori: "egitim",
                  baslik: "Ãœcretsiz YKS Matematik Dersi",
                  aciklama:
                    "SÄ±nava hazÄ±rlanan depremzede Ã¶ÄŸrencilere online veya yÃ¼z yÃ¼ze matematik desteÄŸi.",
                  talepSayisi: 35,
                },
                {
                  id: "6",
                  kategori: "esya",
                  baslik: "Ä°kinci El Laptop Ä°htiyacÄ±",
                  aciklama:
                    "Uzaktan eÄŸitim gÃ¶ren Ã¼niversite Ã¶ÄŸrencisi iÃ§in Ã§alÄ±ÅŸÄ±r durumda bilgisayar.",
                  talepSayisi: 12,
                },
                {
                  id: "7",
                  kategori: "psikoloji",
                  baslik: "GÃ¶nÃ¼llÃ¼ Psikolog DesteÄŸi",
                  aciklama:
                    "Ã‡ocuklar iÃ§in oyun terapisi ve yetiÅŸkinler iÃ§in travma sonrasÄ± destek saÄŸlayacak uzman.",
                  talepSayisi: 22,
                },
                {
                  id: "8",
                  kategori: "lojistik",
                  baslik: "Powerbank ve Åarj Ä°stasyonu",
                  aciklama:
                    "Ä°letiÅŸimin kopmamasÄ± iÃ§in Ã§adÄ±r kente acil Ã§oklu ÅŸarj istasyonu ve dolu powerbank'ler.",
                  talepSayisi: 56,
                },
              ];
            }

            const ilan = canliIlanlar.find(
              (i) => String(i.id) === String(secilenDeger),
            );
            if (ilan) {
              ilan.talepSayisi += 1;
              localStorage.setItem(
                "canliIlanlar",
                JSON.stringify(canliIlanlar),
              );

              alert(
                `Talebiniz alÄ±ndÄ± SayÄ±n ${isim}! Lojistik ekiplerimiz sizinle irtibata geÃ§ecektir. Ana panele yÃ¶nlendiriliyorsunuz...`,
              );
              setTimeout(() => {
                window.location.assign("yardim-ustlen.html");
              }, 500);
            }
          }
        });
    </script>
  </body>
</html>
